{"ast":null,"code":"import _slicedToArray from\"C:/Users/Tejas/Desktop/myproject/part2/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Persons from'./components/Persons';import PersonForm from'./components/PersonForm';import Filter from'./components/Filter';import noteService from'./services/notes';import axios from'axios';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];useEffect(function(){noteService.getAll().then(function(text){console.log(text);setPersons(text);});},[]);var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),filter_by=_useState4[0],setFilter_by=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newNumber=_useState8[0],setNewNumber=_useState8[1];var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){setFilter_by(event.target.value);};var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:message});};var addName=function addName(event){event.preventDefault();var found=persons.findIndex(function(person){return person.name===newName;});if(found!==-1){if(window.confirm(newName+' is already added to the phonebook, replace the old number with a new one?')){noteService.update(persons[found]['id'],{name:newName,number:newNumber}).then(function(response){return console.log(response);}).catch(function(error){return setMessage('Information of '+newName+'has already been removed');});setPersons(persons.map(function(person){return person['name']===newName?{\"name\":newName,\"number\":newNumber,\"id\":person['id']}:person;}));setNewName('');setNewNumber('');setMessage('Updated '+newName);setTimeout(function(){setMessage(null);},2000);// setMessage('')\n}}else{noteService.create({name:newName,number:newNumber}).then(function(added){setPersons(persons.concat(added));setNewName('');setNewNumber('');setMessage('Added '+newName);setTimeout(function(){setMessage(null);},2000);}).catch(function(error){var el=document.createElement('html');el.innerHTML=error.response.data;setMessage(el.getElementsByTagName('pre')[0].innerText);setTimeout(function(){setMessage(null);},2000);});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Filter,{filter_by:filter_by,handleFilterChange:handleFilterChange}),/*#__PURE__*/_jsx(\"h3\",{children:\" Add a new\"}),/*#__PURE__*/_jsx(PersonForm,{addName:addName,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:persons,filter_by:filter_by})]});};export default App;","map":{"version":3,"sources":["C:/Users/Tejas/Desktop/myproject/part2/phonebook/src/App.js"],"names":["React","useState","useEffect","Persons","PersonForm","Filter","noteService","axios","App","persons","setPersons","getAll","then","text","console","log","filter_by","setFilter_by","newName","setNewName","newNumber","setNewNumber","handleNameChange","event","target","value","handleNumberChange","handleFilterChange","message","setMessage","Notification","addName","preventDefault","found","findIndex","person","name","window","confirm","update","number","response","catch","error","map","setTimeout","create","added","concat","el","document","createElement","innerHTML","data","getElementsByTagName","innerText"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport noteService from './services/notes'\nimport axios from 'axios'\nimport './index.css'\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  useEffect(() => {\n    noteService\n      .getAll()\n      .then(text => {\n        console.log(text)\n        setPersons(text)\n      })\n  }, [])\n\n  const [ filter_by,setFilter_by] = useState('')\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    setFilter_by(event.target.value)\n  } \n\n  const [message,setMessage] = useState(null)\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  const addName = (event) =>{\n    event.preventDefault()\n    const found = persons.findIndex(person => person.name === newName)\n    if (found!==-1){\n      if (window.confirm(newName + ' is already added to the phonebook, replace the old number with a new one?')){\n        noteService\n        .update(persons[found]['id'],{name: newName,number: newNumber})\n        .then(response=>console.log(response))\n        .catch(error=>setMessage('Information of ' + newName + 'has already been removed'))\n        setPersons(persons\n          .map(person=>person['name']===newName ? {\"name\":newName, \"number\":newNumber,\"id\": person['id']} : person))\n        setNewName('')\n        setNewNumber('')\n        setMessage('Updated ' + newName)\n        setTimeout(() => {\n          setMessage(null)\n        }, 2000)\n       // setMessage('')\n      }\n    }\n    else{\n      noteService\n      .create({name: newName,number: newNumber})\n      .then(added => {\n        setPersons(persons.concat(added))\n        setNewName('')\n        setNewNumber('')\n        setMessage('Added ' + newName)\n        setTimeout(() => {\n          setMessage(null)\n        }, 2000)\n      })\n      .catch(error =>{\n        const el = document.createElement( 'html' )\n        el.innerHTML = error.response.data\n        setMessage(el.getElementsByTagName('pre')[0].innerText)\n        setTimeout(() => {\n          setMessage(null)\n        }, 2000)\n      })\n    }\n  }\n\n  return (\n    <div>\n      <Notification message={message}/>\n      <h2>Phonebook</h2>\n      <Filter filter_by={filter_by} handleFilterChange={handleFilterChange}/>\n      <h3> Add a new</h3>\n      <PersonForm addName={addName} newName={newName} \n      handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n      <h3>Numbers</h3>\n      <Persons persons={persons} filter_by={filter_by}/>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}